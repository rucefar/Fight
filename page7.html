<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第7頁 - 關係五部曲紀錄</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        table.rel-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            /* 固定欄寬，方便調整各欄寬度 */
            table-layout: fixed;
        }
        table.rel-table th,
        table.rel-table td {
            border: 1px solid #ccc;
            padding: 6px;
            text-align: left;
            overflow: hidden;
        }
        table.rel-table th {
            background: #f0f0f0;
        }
        table.rel-table input {
            width: 100%;
            box-sizing: border-box;
            border: none;
            padding: 4px;
        }
        /* 將輔銷資料欄位放大一些，使輸入框更寬 */
        table.rel-table th:nth-child(8), table.rel-table td:nth-child(8) {
            width: 25%;
        }
        .note {
            font-size: 0.9em;
            background: #fffff5;
            padding: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <a href="page6.html">上一頁</a>
            <a href="home.html">首頁</a>
            <a href="page8.html">下一頁</a>
        </nav>
        <h2>關係五部曲紀錄</h2>
        <!-- 更新關係五部曲說明：最後一階為莫逆 -->
        <div class="note">★ 關係五部曲：認識、熟悉、喜歡、信任、莫逆</div>
        <table class="rel-table">
            <thead>
                <tr>
                    <th style="width:5%">#</th>
                    <th style="width:15%">日期</th>
                    <th style="width:15%">關係度</th>
                    <th style="width:15%">姓名</th>
                    <th style="width:20%">主要話題</th>
                    <th style="width:15%">產品示範</th>
                    <th style="width:15%">錄音檔</th>
                    <th style="width:15%">輔銷資料</th>
                </tr>
            </thead>
            <tbody id="rel-table-body">
            </tbody>
        </table>
        <script>
        // 動態生成表格行並儲存到 localStorage
        (function() {
            const tbody = document.getElementById('rel-table-body');
            const relOptions = ['認識','熟悉','喜歡','信任','莫逆'];
            // 生成8行
            for (let i = 1; i <= 8; i++) {
                const tr = document.createElement('tr');
                // 編號
                const numTd = document.createElement('td');
                numTd.textContent = i;
                tr.appendChild(numTd);
                // 日期
                const dateTd = document.createElement('td');
                const dateInput = document.createElement('input');
                dateInput.type = 'date';
                dateInput.dataset.key = `rel_${i}_date`;
                dateTd.appendChild(dateInput);
                tr.appendChild(dateTd);
                // 關係度
                const degTd = document.createElement('td');
                const degSelect = document.createElement('select');
                degSelect.dataset.key = `rel_${i}_degree`;
                relOptions.forEach(opt => {
                    const option = document.createElement('option');
                    option.value = opt;
                    option.textContent = opt;
                    degSelect.appendChild(option);
                });
                degTd.appendChild(degSelect);
                tr.appendChild(degTd);
                // 姓名
                const nameTd = document.createElement('td');
                const nameInput = document.createElement('input');
                nameInput.type = 'text';
                nameInput.dataset.key = `rel_${i}_name`;
                nameTd.appendChild(nameInput);
                tr.appendChild(nameTd);
                // 主要話題
                const topicTd = document.createElement('td');
                const topicInput = document.createElement('input');
                topicInput.type = 'text';
                topicInput.dataset.key = `rel_${i}_topic`;
                topicTd.appendChild(topicInput);
                tr.appendChild(topicTd);
                // 產品示範
                const demoTd = document.createElement('td');
                const demoInput = document.createElement('input');
                demoInput.type = 'text';
                demoInput.dataset.key = `rel_${i}_demo`;
                demoTd.appendChild(demoInput);
                tr.appendChild(demoTd);
                // 錄音檔
                const audioTd = document.createElement('td');
                const audioInput = document.createElement('input');
                audioInput.type = 'text';
                audioInput.dataset.key = `rel_${i}_audio`;
                audioTd.appendChild(audioInput);
                tr.appendChild(audioTd);
                // 輔銷資料
                const matTd = document.createElement('td');
                const matInput = document.createElement('input');
                matInput.type = 'text';
                matInput.dataset.key = `rel_${i}_material`;
                matTd.appendChild(matInput);
                tr.appendChild(matTd);
                tbody.appendChild(tr);
            }
            // 載入儲存的資料並設置監聽
            const elements = tbody.querySelectorAll('input, select');
            elements.forEach(el => {
                const key = el.dataset.key;
                const saved = localStorage.getItem(key);
                if (saved) {
                    el.value = saved;
                }
                el.addEventListener('change', () => {
                    localStorage.setItem(key, el.value);
                });
            });
        })();
        </script>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const inputs = document.querySelectorAll('input[data-key]');
        inputs.forEach(function(input) {
            const key = input.dataset.key;
            const stored = localStorage.getItem(key);
            if (stored) input.value = stored;
            input.addEventListener('input', function() {
                localStorage.setItem(key, input.value);
            });
        });
    });
    </script>
</body>
</html>