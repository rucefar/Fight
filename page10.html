<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>page10 曼陀羅九宮格 - 曼陀羅九宮格（可輸入自動儲存）</title>
<style>
  :root{
    --line:#333; --thick:#000;
    --c-a:#fde7c6; --c-b:#f9d5cf; --c-c:#cfeff6; --c-d:#c7e1ff;
    --c-g:#c9f1e1; --c-h:#c8f3b4; --c-f:#f8c8df;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans TC,Arial; color:#111;}
  .wrap{max-width:1200px;margin:24px auto;padding:0 12px}
  h2{margin:0 0 20px;font-size:28px;font-weight:800;text-align:center}
  .grid{border:3px solid var(--thick);display:grid;grid-template-columns:repeat(9,1fr);grid-auto-rows:minmax(90px,auto)}
  .cell{border:1px solid var(--line);padding:6px;display:flex;flex-direction:column;gap:6px}
  .label{font-weight:700;text-align:center;min-height:22px}
  .cell input{width:100%;padding:6px;border:1px solid #bbb;border-radius:4px}
  /* 3x3 粗線 */
  .cell:nth-child(9n+1){border-left-width:3px}
  .cell:nth-child(9n){border-right-width:3px}
  .cell:nth-child(-n+9){border-top-width:3px}
  .cell:nth-last-child(-n+9){border-bottom-width:3px}
  .cell:nth-child(n+19):nth-child(-n+27),
  .cell:nth-child(n+46):nth-child(-n+54){border-top-width:3px}
  .cell:nth-child(3), .cell:nth-child(12), .cell:nth-child(21),
  .cell:nth-child(30), .cell:nth-child(39), .cell:nth-child(48),
  .cell:nth-child(57), .cell:nth-child(66), .cell:nth-child(75){border-right-width:3px}
  .cell:nth-child(6), .cell:nth-child(15), .cell:nth-child(24),
  .cell:nth-child(33), .cell:nth-child(42), .cell:nth-child(51),
  .cell:nth-child(60), .cell:nth-child(69), .cell:nth-child(78){border-right-width:3px}
  /* 可選配色 */
  .A{background:var(--c-a)} .B{background:var(--c-b)}
  .C{background:var(--c-c)} .D{background:var(--c-d)}
  .F{background:var(--c-f)} .G{background:var(--c-g)} .H{background:var(--c-h)}
  @media (max-width:840px){ .cell{grid-auto-rows:minmax(80px,auto)} }

  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans TC,Arial;color:#111;}
  .wrap{max-width:1200px;margin:24px auto;padding:0 12px}
  /* 按鈕列 */
  
  
  /* 標題 */
  h2{margin:0 0 20px;font-size:28px;font-weight:800;text-align:center}
    

    .site-nav a{ margin-right:8px; display:inline-block; padding:6px 10px; 
      text-decoration:none; border:1px solid #ccc; border-radius:4px; }
    .site-nav a:hover{ background:#f7f7f7; }
    
</style>
    <link rel="stylesheet" href="styles.css">

<style>
/* === Cards layout 3×3 (preserve all original colors) === */
.cards-matrix{
  display:grid;
  grid-template-columns:repeat(3,minmax(260px,1fr));
  gap:16px;
  margin:12px 0;
}
.card{background:#fff;border-radius:14px;box-shadow:0 8px 22px rgba(0,0,0,.06),0 2px 6px rgba(0,0,0,.04);padding:10px}
.card-title{font-weight:800;margin:4px 4px 8px;color:#333}
.card-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.card-grid .cell{border-radius:10px;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.grid{display:none} /* 隱藏原9×9外框 */
@media (max-width:900px){ .cards-matrix{grid-template-columns:1fr} }
</style>

</head>
<body>

    <style>
      
      
    </style>
    

    <div class="container">
<nav>
            <a href="page9.html">上一頁</a>
            <a href="home.html">首頁</a>
            <a href="page11.html">下一頁</a>
        </nav>


    
    
    

    <h2>曼陀羅九宮格</h2>
    <div id="mandala" class="grid"></div>
  </div>

<script>
// Auto-save helper: save on input to localStorage
function bindAutosave(rootId, storagePrefix){
  const root = document.getElementById(rootId);
  if(!root) return;
  // restore
  root.querySelectorAll('input, textarea').forEach(el=>{
    const k = storagePrefix + (el.dataset.key || el.name || '');
    const v = localStorage.getItem(k);
    if(v !== null) el.value = v;
    el.addEventListener('input', ()=>{
      localStorage.setItem(k, el.value);
    });
  });
}
</script>

<script>
// 以資料驅動 9x9：label 與可選配色 className
const labels = [
  "A2","A3","A4","B2","B3","B4","C2","C3","C4",
  "A1","A","A5","B1","B","B5","C1","C","C5",
  "A8","A7","A6","B8","B7","B6","C8","C7","C6",
  "H2","H3","H4","B","C","D","D2","D3","D4",
  "H1","H","H5","A","","E","D1","D","D5",
  "H8","H7","H6","H","G","F","D8","D7","D6",
  "G2","G3","G4","F2","F3","F4","E2","E3","E4",
  "G1","G","G5","F1","F","F5","E1","E","E5",
  "G8","G7","G6","F8","F7","F6","E8","E7","E6"
];
const colorMap = {A:'A',B:'B',C:'C',D:'D',E:'F',F:'F',G:'G',H:'H'}; // 可調整
const root = document.getElementById('mandala');
labels.forEach((lab, idx)=>{
  const c = document.createElement('div');
  c.className = 'cell' + (colorMap[lab] ? ' ' + colorMap[lab] : '');
  const t = document.createElement('div');
  t.className = 'label';
  t.textContent = lab;
  const input = document.createElement('input');
  input.type = 'text';
  input.placeholder = '輸入…';
  input.dataset.key = 'm_cell_' + (idx+1);
  c.appendChild(t); c.appendChild(input);
  root.appendChild(c);
});
bindAutosave('mandala','mandala:');
</script>

<script>
(function(){
  const root = document.getElementById('mandala');
  if(!root) return;
  const cells = Array.from(root.children); // 81 cells in row-major order

  // 取得某個 3x3 區塊的 9 個索引（按原始行列順序）
  function subgrid(r0, c0){
    const arr = [];
    for(let r=0;r<3;r++){
      for(let c=0;c<3;c++){
        arr.push((r0+r)*9 + (c0+c));
      }
    }
    return arr;
  }

  // 定義各區塊在原 9×9 中的起點 (row,col)
  const blocks = {
    'A': {r:0, c:0},
    'B': {r:0, c:3},
    'C': {r:0, c:6},
    'H': {r:3, c:0},
    'CENTER': {r:3, c:3},
    'D': {r:3, c:6},
    'G': {r:6, c:0},
    'F': {r:6, c:3},
    'E': {r:6, c:6},
  };

  // 你要的順序：
  //  A | B | C
  //  H | CENTER | D
  //  G | F | E
  const order = [
    ['A','B','C'],
    ['H','CENTER','D'],
    ['G','F','E'],
  ];

  const matrix = document.createElement('div');
  matrix.className = 'cards-matrix';

  function buildCard(key){
    const card = document.createElement('div');
    card.className = 'card';
    const title = document.createElement('div');
    title.className = 'card-title';
    title.textContent = key === 'CENTER' ? '中心 3×3' : (key + ' 區');
    const grid = document.createElement('div');
    grid.className = 'card-grid';

    const {r,c} = blocks[key];
    const idxs = subgrid(r, c);
    idxs.forEach(i => grid.appendChild(cells[i])); // 保留原有顏色與事件

    card.appendChild(title);
    card.appendChild(grid);
    return card;
  }

  order.forEach(row => {
    row.forEach(key => matrix.appendChild(buildCard(key)));
  });

  // 用卡片矩陣替換原 9×9 容器
  root.replaceWith(matrix);
})();
</script>

</body>
</html>
